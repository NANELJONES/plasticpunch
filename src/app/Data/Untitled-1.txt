"use client"
import { usePathname } from "next/navigation";
import React from 'react'
import Layout1 from '@/app/layout/Layout1'
import { useStateContext } from "@/app/Context/StateContext";
import Image from 'next/image'
import { GetSingleBlogPost } from "@/app/api/blog";
import { useEffect, useState } from "react";

import Modal from "@/app/components/Modal";
import { blog_info } from "@/app/Data/Data";

const page = () => {
  const { show_modal, set_show_modal, set_url } = useStateContext();

  const pathname = usePathname(); // Get the current path
  const slug = pathname.split("/").pop(); // Extract the last segment of the path (slug)

  const [post, setpost] = useState(null); // Store the post data
  const [loading, setLoading] = useState(true); // Handle loading state

//   useEffect(() => {
  
//     const fetchpost = async () => {
//       try {
//         const fetchedpost = await GetSingleBlogPost(slug); // Pass slug dynamically
    
//         setpost(fetchedpost); // Set the state with fetched data
//       } catch (error) {
//         console.error("Error fetching post:", error);
//       } finally {
//         setLoading(false); // Stop loading after fetch
//       }
//     };

//     if (slug) fetchpost(); // Fetch post only if slug is available
//   }, [slug]);

  if (loading) return <p>Loading...</p>; // Show loading state

  if (!post) return <p>post not found.</p>; // Handle missing post



  return (
<>
    {show_modal && <Modal></Modal>}
    <div className="w-[500px] h-[500px] bg-primary_color"></div>
   <h1>heyuyyyyyyyyyyyy</h1>
    <div className='    '>
   
    {/* {post == null ?       <div className="w-full bg-primary_color h-[100dvh]"> Content Loading</div> : ""} */}
    <div
      dangerouslySetInnerHTML={{__html: blog_info.data.postsConnection.edges[0].node.content}}
    />

    <h1>Hello</h1>
    

    

     
    </div>
    </>
  )
}

export default page